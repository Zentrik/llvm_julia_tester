From e1e6bbd4f92ca7c4e60d9ad86955c6889d2eb27c Mon Sep 17 00:00:00 2001
From: Zentrik <llvm.zentrik@gmail.com>
Date: Thu, 19 Sep 2024 18:42:09 +0100
Subject: [PATCH] [LLVM] Adapt to clang pseudo being removed

https://github.com/llvm/llvm-project/pull/109154
---
 L/LLVM/common.jl | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/L/LLVM/common.jl b/L/LLVM/common.jl
index 52ffc703da..9810d085ee 100644
--- a/L/LLVM/common.jl
+++ b/L/LLVM/common.jl
@@ -139,7 +139,10 @@ if [[ "${LLVM_MAJ_VER}" -gt "12" ]]; then
     ninja -j${nproc} mlir-linalg-ods-yaml-gen
 fi
 if [[ "${LLVM_MAJ_VER}" -gt "14" ]]; then
-    ninja -j${nproc} clang-tidy-confusable-chars-gen clang-pseudo-gen mlir-pdll
+    ninja -j${nproc} clang-tidy-confusable-chars-gen mlir-pdll
+fi
+if [[ "${LLVM_MAJ_VER}" -gt "14" ]] && [[ "${LLVM_MAJ_VER}" -le "20" ]]; then
+    ninja -j${nproc} clang-pseudo-gen
 fi
 if [[ "${LLVM_MAJ_VER}" -ge "19" ]]; then
     ninja -j${nproc} mlir-src-shard
     er
